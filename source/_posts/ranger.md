---
title: Ranger，命令行 UI 化的文件管理器
date: 2020-05-03 
updated: 2020-05-06 
urlname: Ranger
tags:
  - Shell
  - Windows
  - Ranger
categories: 
  - Shell
  - 教程/Tutorial
  - Linux

copyright: true
permalink: false
top: false
comments: true
password: 
abstract: 🔐咦，这儿有东西被加密了，需要输入密码才能查看~
message: 请输入密码，按[Enter]键确定.
wrong_pass_message: 抱歉, 这个密码看着不太对, 请再试试.
---

**README**
本文介绍 `Ranger` ，它是一个非常实用且具有 `VI/VIM快捷键` 风格的控制台文件管理器，让熟悉 `vim` 的你可以快速上手。它提供了一个简约而美观的界面，并具有目录层次结构的视图
<!---more--->






## 引言

[Github 项目主页](https://github.com/ranger/ranger)

> 本文大量参考并引用了  [Ranger 用法总结](http://www.huangpan.net/posts/ji-ke/2019-08-21-ranger.html#toc-heading-13) 这篇博文，感谢 **Huang Pan** 同学总结了如此详尽的文章。
>
> 本人在此基础上删减了些几乎不会用上的操作，并对常用操作进行了概括说明，希望方便大家更好的使用，如果想研究 `ranger` ，亦或者是不喜欢想另寻一个替代品，推荐拜读 [Huang Pan 写的原文](http://www.huangpan.net/posts/ji-ke/2019-08-21-ranger.html#toc-heading-13) 来寻找答案。

## 简介：

如果你主要使用命令行，并且在寻找一个好的命令行文件管理器，`Ranger` 可能是你最优的选择。

`Ranger` 是一个非常实用且具有 `VI/VIM快捷键` 风格的控制台文件管理器，让熟悉 `vim` 的你可以快速上手。它提供了一个简约而美观的界面，并具有目录层次结构的视图。它附带了一个名字叫 `rifle` 的文件启动器，该文件启动器擅长自动找出 “使用某文件类型适合的程序”。

### 亮点

- UTF-8 Support (if your Python copy supports it) /UTF-8支持（如果您的 Python 支持它）
- Multi-column display / 多列显示
- Preview of the selected file/directory / 预览所选文件或目录
- Common file operations (create/chmod/copy/delete/…) / 常用文件操作（创建/ chmod /复制/删除/ ...）
- Renaming multiple files at once / 一次重命名多个文件
- VIM-like console and hotKeys / 类似于VIM的控制台和快捷键
- Automatically determine file types and run them with correct programs / 自动确定文件类型并使用正确的程序运行它们
- Change the directory of your shell after exiting ranger / 退出Ranger后更改您的Shell目录
- Tabs, bookmarks, mouse support… / 标签，书签，鼠标支持...

## 安装：

通过包管理：

- `apt install -y ranger`

通过 PyPi 安装：

- `pip install ranger-fm`



## 一些概念：

### 文件预览

默认情况下，只能预览文本文件，预览更多类型的文件依赖与一些其他软件来协同工作，你需要安装他们才能预览对应的文件类型。

详情参考这里的博文：[文件预览的配置](http://www.huangpan.net/posts/ji-ke/2019-08-21-ranger.html#%E9%A2%84%E8%A7%88)

### 选择

  `将被执行操作的文件对象` 定义为 **如果有标记，则是所有标记的文件，否则是光标处的文件。** 在使用 `:delete` 命令时一定要注意这一点，它指删除选择的所有文件及文件夹。你可以通过按 `SPACE` 来标记文件、`uv` 来取消标记。黄色的 `Mrk` 符号位于终端右下角，表示此文件夹里有标记的文件。黄色的 `Mrk` 并不会因为切换目录而消失。
### 操作

​		Ranger 中有 **按键** 和 **命令** 两种操作方式，按键是直接键入键盘上的键完成某个操作，命令则需前输入 `:`，然后输入相应的命令。

​		快捷键在文件 `ranger/config/rc.conf` 中定义，查看此文件以获取所有快捷键的列表。你可以使用 `ranger --copy-config=rc` 选项将其复制到本地配置目录 ` ~/.config/ranger/` 中。



## 使用说明：

### 使用概要：

​		和 `vim` 极其类似，可以使用 `方向键` 或者 `h` `j` `k` `l` 进行移动，`Enter`打开文件，`q` 退出，并且许多快捷键都有一个额外的数字参数。键入 `5j` 向下移动 5 行，`10` + `SPACE` 连续标记 10 个文件。

终端输入 `ranger` 命令后的主界面，界面如下：

- 第一栏是显示父目录
- 第二列是主列又称为主栏
- 第三列显示当前文件的预览

![浏览器界面](http://i2.tiimg.com/695542/5c0ad505c9e42b70.png)



### 使用解析

下面列出常用操作的快捷键，其中 `^` 代表 `CTRL`，`!` 代表 `ALT`。

#### 实用功能

| 按键            | 说明                                                    |
| :-------------- | :------------------------------------------------------ |
| `S`             | 打开终端并跳转到当前目录，同 `:shell $SHELL`。          |
| `du`            | 显示当前目录的磁盘占用情况                              |
| `dU`            | 显示当前目录的磁盘占用情况（按大小排序）                |
| `^r`            | 刷新当前目录并清空缓存                                  |
| `!` 或者 `s`    | 执行 `Shell` 命令，等同于 `:shell `，常与 `-w` 参数连用 |
| `Control` + `h` | 显示隐藏文件                                            |



#### 移动光标

> `vim` 风格的快捷键

| 按键       &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; | 说明                                                         |
| :----------------------------------------------------------: | :----------------------------------------------------------- |
|            `H` `J` `K` `L` <br />或 <br />方向键             | `H`=左（回到父文件夹）<br />`J`=下 <br />`K`=上 <br />`L`=右（进入光标所在文件夹或打开光标处文件） |
|               `^u` 或者 `K`<br />`^d` 或者 `J`               | 向上翻半页 <br />向下翻半页                                  |
|        `^b` 或者 `PAGEUP` <br />`^f` 或者 `PAGEDOWN`         | 向上翻一页 <br />向下翻一页                                  |
|            `gg` 或者 `HOME` <br />`G` 或者 `END`             | 跳转到顶端 <br />跳转到底端                                  |
|                         `[` <br/>`]`                         | 父目录上移 <br />父目录下移                                  |
|                       `g` + `对应字母`                       | 跳转到相应的目录，如：<br />`gh`：跳转到 `~` 目录<br />`g?`：跳转到 `/usr/share/doc/ranger` 目录<br />`gR`：跳转到 `/usr/lib/python2.7/dist-packages/ranger` 目录<br />`gd`：跳转到 `/dev` 目录<br />`ge`：跳转到 `/etc` 目录<br />`gm`：跳转到 `/media` 目录<br />`gM`：跳转到 `/mnt` 目录<br />`go`：跳转到 `/opt` 目录<br />`gs`：跳转到 `/srv` 目录<br />`gu`：跳转到 `/usr` 目录<br />`gv`：跳转到 `/var` 目录<br />`gr` 或者 `g/`：跳转到 `/` 目录 |
|                          `gl` `gL`                           | 如果当前条目是一个符号链接（有 `->` 符号），那么跳转到它的原始位置。 |
|                        `cd + <path>`                         | 同 `:cd <path>` ，在 `ranger` 中 快速切换路径                |

#### 选择文件

  Ranger 可以方便快速地选择多个条目（包括文件和文件夹）。

| 按键    | 说明                                                         |
| :------ | :----------------------------------------------------------- |
| `SPACE` | 选择/取消选择一个条目，之后光标会自动跳到下一个条目。不会因为切换目录而失效。 |
| `v`     | 反选                                                         |
| `V`     | *开启/关闭视觉模式。在视觉模式下，移动光标即可选择条目。也可以按 `uV` 或者 `ESC` 退出。* |
| `uv`    | 取消所有选择                                                 |

- 快速选择当前位置到顶端的所有条目：`V` + `gg`
- 快速选择当前位置到底端的所有条目：`V` + `G`

#### ! 删除文件

>  不够优雅

| 按键           | 说明                                              |
| :------------- | :------------------------------------------------ |
| `dD` 或者 `F8` | 删除条目（文件或者文件夹），或者 `:` + `delete`。 |
| `DD`           | 将条目移动到回收站里。                            |

#### ! 新建文件

> 不够优雅

| 按键     | 说明                           |
| :------- | :----------------------------- |
| `F7`     | 新建文件夹，等同于 `:mkdir `。 |
| `INSERT` | 新建文件，等同于 `:touch `。   |

#### 查看以及编辑文件

> 查看按 `E`
> 编辑按 `右方向键` 即可

| 按键          | 说明                                                         |
| :------------ | :----------------------------------------------------------- |
| `i` 或者 `F3` | 查看文件，*与在终端中输入 `pager` + `文件名` 一样。*         |
| `E` 或者 `F4` | 调用默认编辑器编辑文件，可在终端中输入 `select-editor` 选择默认编辑器。 |

#### 运行文件

> 推荐用按键 `r` 自己指定

| 按键             | 说明                                      |
| :--------------- | :---------------------------------------- |
| `l` 或者 `ENTER` | 用默认程序运行文件                        |
| `r`              | 用指定程序打开文件，其中 `0` 是默认程序。 |

#### 重命名

>  推荐用按键 `A` 或 `I`

| 按键 | 说明                             |
| :--- | :------------------------------- |
| `cw` | 重命名（含后缀名）               |
| `I`  | 重命名，光标在最前               |
| `A`  | 重命名，光标在最后（含后缀名）   |
| `a`  | 重命名，光标在最后（不含后缀名） |

#### 复制

> 要复制/移动多个文件，只需用 `Space 空格键` 标记它们，然后使用 `dd`/ `yy`。
> 如果要对存储在不同目录中的多个文件进行操作，可以在粘贴之前使用`ya`/ `da`将它们添加到要复制/移动的文件列表中。

| 按键           | 说明                                                         |
| :------------- | :----------------------------------------------------------- |
| `yy` 或者 `F5` | 复制                                                         |
| `ya`           | `add` 模式，添加光标处文件到复制队列中（文件夹无效）。       |
| `yr`           | `remove` 模式，从复制队列中移除光标处文件（文件夹无效）。    |
| `yd` `yn` `yp` | 分别是复制 `目录名=dir `；复制 `文件名=name` 复制`路径=path` |
| *`yt`*         | *`toggle` 模式，切换光标处文件是否在复制队列中（文件夹无效）。* |
| *`yk`*         | *将光标处文件和上一文件添加到复制队列中（文件夹无效）。*     |
| *`yj`*         | *将光标处文件和下一文件添加到复制队列中（文件夹无效）。*     |
| `ygg`          | 将光标处到顶端的所有文件添加到复制队列中（文件夹无效）       |
| `yG`           | 将光标处到底端的所有文件添加到复制队列中（文件夹无效）       |

#### 剪切

> 推荐用按键 `dd`
> 零碎文件剪切用 `da`  与 `dr`
> 取消剪切用按键 `ud`

| 按键           | 说明                    |
| :------------- | :---------------------- |
| `dd` 或者 `F6` | 剪切                    |
| `da`           | `add` 模式，同复制。    |
| `dr`           | `remove` 模式，同复制。 |
| `dt`           | `toggle` 模式，同复制。 |
| `dk`           | 同复制                  |
| `dj`           | 同复制                  |
| `dgg`          | 同复制                  |
| `dG`           | 同复制                  |
| `ud` 或者 `uy` | 取消剪切                |

#### 粘贴

> 推荐用按键 `pp`

| 按键  | 说明                                                         |
| :---- | :----------------------------------------------------------- |
| `pp`  | 粘贴，默认 `append` 模式                                     |
| `pP`  | `append` 模式，如果该目录中有同名条目，则在条目后面加上 `_`、`_0`、`_1`……。如果条目是文件，则在文件后缀名后加入。 |
| `po`  | `overwrite` 模式，如果该目录中有同名条目，则覆盖原来的条目。 |
| `pO`  | `append` 模式 + `overwrite` 模式。                           |
| `pl`  | 粘贴为符号链接，不在状态栏显示目标条目的相对路径。           |
| `pL`  | 粘贴为符号链接（相对路径），在状态栏显示目标条目的相对路径。 |
| `phl` | 粘贴为硬链接                                                 |
| `pht` | 粘贴为硬链接的子目录（hardlinked subtree）                   |

#### 更改权限

![增加权限列表（取消权限列表一样）](http://i2.tiimg.com/695542/e52e4fa6e0be9884.png)

| 按键 | 说明             |
| :--- | :--------------- |
| `+`  | 显示增加权限列表 |
| `-`  | 显示取消权限列表 |
| `=`  | 输入数字赋予权限 |

##### 权限组说明

- u` 表示该文件的拥有者（User）
- `g` 表示与该文件的拥有者属于同一个群体（Group）者
- `o` 表示其他以外的人（Other）
- `a` 表示这三者皆是（All）

##### 权限含义

- 图片中左下角从左到右，第一个 `d` 代表文件夹，否则是 `-`，然后依次显示 `u`、`g`、`o` 的 `rwx` 权限。
- `-` 表示不具备任何权限，`r` 表示可读取（文件夹内可添加和删除文件），`w` 表示可写入，`x` 表示可执行，

##### 权限数字赋值算法

  `chmod ugo file`，其中 `r=4`，`w=2`，`x=1` 则

  - 若要 `rwx` 属性则 4+2+1= `7`；
  - 若要 `rw-` 属性则 4+2= `6`；
  - 若要 `r-x` 属性则 4+1= `5`。

#### *搜索

> 推荐使用 `/` 配合 `n` `N` 对当前目录进行查找
> 推荐使用 `zf` 过滤目录中的文件

| 按键          | 说明                                                         |
| :------------ | :----------------------------------------------------------- |
| `/`           | 打开搜索框，输入要搜索的字符串，回车后开始搜索。             |
| `f`           | 查找，等同于运行满足条件的文件或者打开满足条件的文件夹。     |
| `zf`          | 与命令行 `filter` 作用一样，**过滤当前目录** 只显示符合条件的条目，区分大小写。<br />如过滤 `pdf` 文件， `zf`  + `pdf`，回车) |
| `n` <br />`N` | 查找下一个搜索结果 <br />查找上一个搜索结果                  |

#### 排序

> 大写 `正序`，小写 `倒序`

| 按键             | 说明                                                         |
| :--------------- | :----------------------------------------------------------- |
| `o` + `对应字母` | 通过对应属性排序，如：<br />`oa/oA`：按 **访问时间** `access time` 属性 `正向/反向` 排序<br />`ob/oB`：按 **文件名称** `basename` 属性 `正向/反向` 排序<br />`oc/oC`：按 **文件属性和内容更改时间 **`change time` 属性 `正向/反向` 排序<br />`om/oM`：按 **文件内容修改时间** `modify time` 属性 `正向/反向`排序<br />`os/oS`：按 **文件大小** `size` 属性 `正向/反向`排序<br />`ot/oT`：按 **文件后缀类型** `type` 属性 `正向/反向`排序<br /><br />*`on/oN`：按 `natural` 属性 `正向/反向`排序<br />`oe/oE`：按 `extension` 属性 `正向/反向`排序<br />`or`：反向排序（Ranger 默认升序排列）* |
| *`zs`*           | *排序是否区分大小写*                                         |

#### 显示模式

> 默认 `Mf`，推荐使用 `Ms`，查看权限使用 `Mp`

| 按键 | 说明                                                         |
| :--- | :----------------------------------------------------------- |
| `Mf` | ![filename 模式（文件名 + 文件大小，文件夹显示文件数）](http://i2.tiimg.com/695542/6c2bf38f9fec537e.png)**filename 模式（文件名 + 文件大小，文件夹显示文件数）** |
| `Mi` | ![fileinfo 模式（文件名，媒体文件显示更多信息，文件夹显示文件数）](http://i2.tiimg.com/695542/6649030348820da6.png)**fileinfo 模式（文件名，媒体文件显示更多信息，文件夹显示文件数）** |
| `Mm` | ![mtime 模式（文件名 + 最后修改时间）](http://i1.fuimg.com/695542/4c454ee4a356fb54.png)**mtime 模式（文件名 + 最后修改时间）** |
| `Mp` | ![permissions 模式（权限信息 + 文件名）](http://i1.fuimg.com/695542/1b6c13c803d6a985.png)**permissions 模式（权限信息 + 文件名）** |
| `Ms` | ![sizemtime 模式（文件名 + 文件大小 + 最后修改时间，文件夹显示文件数）](http://i1.fuimg.com/695542/ecb036c98c86a7a7.png)**sizemtime 模式（文件名 + 文件大小 + 最后修改时间，文件夹显示文件数）** |
| `Mt` | ![metatitle 模式（文件名 + 文件大小，文件夹显示文件数）](http://i2.tiimg.com/695542/6c2bf38f9fec537e.png)**metatitle 模式（文件名 + 文件大小，文件夹显示文件数）** |

#### 书签

> `m` 查看书签，
> `m` + `key` = 标记为书签，`key` 是 **一个** 字母或者数字
> `' ` 撇号，反引号 + `key` 进行书签跳转

你可以设置一个书签以便快速的进入某个目录。键入 `m` + `Key` 为当前目录添加书签，你可以通过键入 `反引号` + `Key` 重新进入这个目录。`Key` 可以是任何 **一个** 字母或数字。每次跳转到书签时，键 \` 处的特殊书签将设置为最后一个目录，所以输入 \`\` 可以让你回到原来的位置。而且与 Vim 不同，这些书签是永久保存的。


| 按键                        | 说明                                      |
| :-------------------------- | :---------------------------------------- |
| `m` 或者 \` 或者 `'`        | 显示书签页面                              |
| `m` + `Key`                 | 将当前文件夹加入到书签中，用 `Key` 表示。 |
| \` + `Key` 或者 `'` + `Key` | 跳转到用 `Key` 表示的文件夹中。           |
| \`\` 或者 `''`              | 后退到上一个历史记录，同 `H`              |

#### 标签页

  Ranger 支持多个文件管理页面标签页，可以快速地在多个标签页之间切换

> 学习 `g`  或 `Control` 中的一种即可，以免过多造成困淆。

| 按键&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; &nbsp;&nbsp;&nbsp; &nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &nbsp; | 说明                                                         |
| :----------------------------------------------------------- | :----------------------------------------------------------- |
| `gn` 或者 `Control + n`                                      | 新建标签页                                                   |
| `gc` 或者 `Control + w`                                      | 关闭当前标签页，如果是最后一个标签页，则不能被关闭。         |
| `gt` 或者 `TAB` 或者 `^i`                                    | 切换到下一个标签页                                           |
| `gT` 或者 `SHIFT` + `TAB`                                    | 切换到上一个标签页                                           |
| `ALT` + `N`                                                  | 新建 `N` 的标签页，如果有，则切换到 `N` 标签页，其中 `N` 代表 1 - 9 的数字。 |
| `uq`                                                         | 重新打开最近一次关闭的标签页，可连续多次，重启 Ranger 后无效。 |

#### 打开日志界面

> 这是 `ranger ` 运行日志界面，按大写 `W` 即可进入查看

![日志界面](http://i2.tiimg.com/695542/b55c427ccfaefc66.png)

#### 打开任务管理器界面

> 按小写 `w` 进入此界面
> 在执行某些操作（比如复制一个大文件）时不能立即完成，这在 ranger 中就是一个任务，你可以 停止|启动某个任务， 也可以对某个任务设置优先级。

| 按键           | 说明                                              |
| -------------- | ------------------------------------------------- |
| `w` 小写       | 打开/关闭任务视图.                                |
| `dd`           | 终止一个任务                                      |
| `j`  <br />`k` | 降低 当前任务的优先级 <br />提升 当前任务的优先级 |

![任务管理器界面](http://i2.tiimg.com/695542/3b6f5a34b03c05f7.png)

---------

#### 文件管理界面的设置

| 按键 | 说明                                                       |
| :--- | :--------------------------------------------------------- |
| `zP` | 是否显示光标处文件夹内的文件                               |
| `zc` | 当文件预览不可见时，是否应该折叠右栏，使主栏扩大。         |
| `zd` | 文件夹是否在文件前面                                       |
| `zh` | 是否显示隐藏文件，同 `^h`                                  |
| `zI` | 每次按键后是否刷新输入。                                   |
| `zm` | 是否能用鼠标。如果能，则左键光标移动，右键打开，滚轮上下。 |
| `zp` | 是否预览文件（含图片）                                     |
| `zs` | 排序是否区分大小写                                         |
| `zu` | 是否自动更新状态栏上显示的该目录所有文件大小的值           |
| `zv` | 是否启用预览脚本                                           |
| `zi` | 是否预览图片                                               |

#### 杂项

| 按键                             | 说明                                                         |
| :------------------------------- | :----------------------------------------------------------- |
| `q` 或者 `Q` 或者 `ZQ` 或者 `ZZ` | 退出 Ranger                                                  |
| `ESC`                            | 将模式改为正常模式，同 Vim 的操作。                          |
| `^l`                             | 重画当前窗口                                                 |
| `^c`                             | 终止                                                         |
| `^h`                             | 是否显示隐藏文件，同 `zh`                                    |
| `~`                              | 切换界面风格                                                 |
| `}`                              | 横移：如果光标处是文件夹，则进入该文件夹；如果是文件，则光标移动到父文件夹的下一个兄弟文件夹中的第一个条目上，如果没有兄弟文件夹，则移动到父文件夹的父文件夹的下一个兄弟文件夹中的第一个条目上。 |



### Pager 快速查看界面

> 按键 `i` 进入，`q` 退出，大写 `E` 进行文件编辑，界面如下：

![Pager 界面](http://i1.fuimg.com/695542/e31c10cefc7ea50f.png)



### 鼠标操作

Ranger 支持鼠标操作，包括左键、右键和滚轮。如果鼠标不能工作，在 Ranger 的浏览器界面键入 `zm` 开启鼠标功能。

#### 左键

- 点击主栏的条目，则光标跳转到条目上；
- 点击左栏的父目录上的条目，则主栏跳转到父目录
- 点击标签页，则跳转到相应的标签页；
- 点击左上角的用户名，则跳转到 `/` 目录。
- *点击右栏的预览窗口，则用系统默认的程序打开该文件；*

#### 右键

- 点击文件，用默认程序运行文件；

#### 滚轮

- 在主栏中，光标上下移动；
- 在左栏中，切换 `父` 文件夹，同 `[` 和 `]`；







运行shell命令，键入：shell 或者 按 s or ！ 快捷键 -w 完成该过程后，等待按 `ENTER` 键重新进入 Ranger。

### 帮助界面

![](http://i2.tiimg.com/695542/01faf89c12fde959.png)

**帮助界面**

| 按键          | 说明       |
| :------------ | :--------- |
| `?` 或者 `F1` | 查看帮助   |
| `?m`          | 菜单页     |
| `?k`          | 查看快捷键 |
| `?c`          | 查看命令   |
| `?s`          | 查看设置   |



## 注解与参考

### 参考

> 前人栽树后人乘凉...

[Ranger Github 主页](https://github.com/ranger/ranger)

[Ranger 用法总结](http://www.huangpan.net/posts/ji-ke/2019-08-21-ranger.html#toc-heading-77)

[linux终端文件管理器ranger使用详解]([http://www.mikewootc.com/wiki/linux/usage/ranger_file_manager.html#%E5%BF%AB%E9%80%9F%E9%A2%84%E8%A7%88](http://www.mikewootc.com/wiki/linux/usage/ranger_file_manager.html#安装))

### 注解

[^1]: [Powerline 字体主页](https://github.com/powerline/fonts)
[^2]: [nerd-font 字体主页](https://github.com/ryanoasis/nerd-fonts)